local GuiLibrary = {}

-- Function to make frames draggable
function GuiLibrary.makeDraggable(titleFrame, window)
    local dragging = false
    local dragStart = nil
    local startPos = nil

    local function onDragStart(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = window.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end

    local function onDragInput(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            window.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end

    titleFrame.InputBegan:Connect(onDragStart)
    titleFrame.InputChanged:Connect(onDragInput)
end

-- Function to create a ScreenGui
function GuiLibrary.createScreenGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    return screenGui
end

-- Function to create a Window
function GuiLibrary.createWindow(parent)
    local window = Instance.new("Frame", parent)
    window.Name = "Window"
    window.BackgroundColor3 = Color3.fromRGB(44, 44, 44)
    window.BorderSizePixel = 0
    window.Size = UDim2.new(0, 300, 0, 250)
    window.Position = UDim2.new(0.5, -150, 0.5, -125)
    window.ZIndex = 2

    -- Title Frame
    local titleFrame = Instance.new("Frame", window)
    titleFrame.Name = "TitleFrame"
    titleFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    titleFrame.Size = UDim2.new(1, 0, 0, 24)
    titleFrame.ZIndex = 2

    local tabFrame = Instance.new("Frame", window)
    tabFrame.Name = "TabFrame"
    tabFrame.BackgroundColor3 = Color3.fromRGB(55, 55, 55) -- TabFrame background color
    tabFrame.BorderSizePixel = 0
    tabFrame.Size = UDim2.new(1, 0, 0, 50) -- TabFrame size, make it larger for visibility
    tabFrame.Position = UDim2.new(0, 0, 0, 24) -- Positioned below the TitleFrame
    tabFrame.ZIndex = 2

    -- Title Label
    local title = Instance.new("TextLabel", titleFrame)
    title.Name = "Title"
    title.BackgroundTransparency = 1
    title.Size = UDim2.new(1, 0, 1, 0)
    title.Font = Enum.Font.GothamBold
    title.Text = "Shyde Hub"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 18
    title.ZIndex = 3

    -- Make the title frame draggable
    GuiLibrary.makeDraggable(titleFrame, window)

    return window
end

-- Function to create a Tab Frame
function GuiLibrary.createTab(window, tabName)
    local tabFrame = window:FindFirstChild("TabFrame")
    if not tabFrame then
        error("TabFrame not found in window")
        return nil
    end

    local tab = Instance.new("TextButton")
    tab.Name = tabName
    tab.Parent = tabFrame
    tab.BackgroundColor3 = Color3.fromRGB(45, 45, 45) -- Tab color
    tab.Size = UDim2.new(0, 100, 0, 24) -- Correct size for small perpendicular rectangle
    tab.ZIndex = 3
    tab.TextColor3 = Color3.fromRGB(255, 255, 255)
    tab.Font = Enum.Font.SourceSans
    tab.TextSize = 18
    tab.Text = tabName

    -- Auto-sorting for tabs
    local function autoSort()
        local xPos = 0
        for _, element in ipairs(tabFrame:GetChildren()) do
            if element:IsA("TextButton") then
                element.Position = UDim2.new(0, xPos, 0, 0)
                xPos = xPos + element.Size.X.Offset -- Place the next tab right next to the current one
            end
        end
    end

    tabFrame.ChildAdded:Connect(autoSort)
    tabFrame.ChildRemoved:Connect(autoSort)

    autoSort() -- Sort tabs when a new tab is created

    return tab
end

-- Function to create a Button within a Tab
function GuiLibrary.createButton(tab, name, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Parent = tab
    button.Text = name
    button.Size = UDim2.new(0, 200, 0, 50) -- Size of button as a perpendicular rectangle
    button.Position = UDim2.new(0.5, -button.Size.X.Offset / 2, 0, 50) -- Position the button below the tab
    button.AnchorPoint = Vector2.new(0.5, 0) -- Anchor point set to center the button
    button.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSans
    button.TextSize = 18
    button.ZIndex = 2

    button.MouseButton1Click:Connect(callback)

    return button
end


-- Create the main GUI container
local screenGui = GuiLibrary.createScreenGui()

-- Create the window
local window = GuiLibrary.createWindow(screenGui)

-- Create tabs within the window
local tab1 = GuiLibrary.createTab(window, "Tab1")
local tab2 = GuiLibrary.createTab(window, "Tab2")
-- Add more tabs as needed

-- Add buttons to the tabs
GuiLibrary.createButton(tab1, "Button1", function()
    print("Button1 clicked")
end)

GuiLibrary.createButton(tab2, "Button2", function()
    print("Button2 clicked")
end)
